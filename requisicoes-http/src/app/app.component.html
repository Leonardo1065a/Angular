<mat-toolbar color="primary" class="mat-elevation-z8">
  <span>Exemplos of HTTP Request</span>
</mat-toolbar>

<br />

<div fxLayout="row wrap" fxLayoutAlign="space-around start" fxLayoutGap="20px">
  <mat-card fxFlex="30" class="mat-elevation-z8">
    <mat-card-header>
      <mat-card-title>Simple HTTP GET</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-list *ngIf="simpleReqPostObs$ | async as posts">
        <mat-list-item *ngFor="let post of posts">
          <p mat-line>{{ post.id }}</p>
          <h4 mat-line>{{ post.title }}</h4>
          <p mat-line>{{ post.body }}</p>
        </mat-list-item>
      </mat-list>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="primary" (click)="getSimplesHttpRequest()">
        Send Request
      </button>
    </mat-card-actions>
    <mat-card-footer> </mat-card-footer>
  </mat-card>

  <mat-card fxFlex="20" class="mat-elevation-z8">
    <mat-card-header>
      <mat-card-title>HTTP GET / Error Handling</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <ul *ngIf="postsErrorHandling">
        <li *ngFor="let p of postsErrorHandling">
          {{ p.id }}
        </li>
      </ul>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="accent" (click)="getPostsWithErrorHandling()">
        Error Request
      </button>
      <button
        mat-button
        color="primary"
        (click)="getPostsWithErrorHandlingOk()"
      >
        Success Request
      </button>
    </mat-card-actions>
    <mat-card-footer> </mat-card-footer>
  </mat-card>

  <mat-card fxFlex="20" class="mat-elevation-z8">
    <mat-card-header>
      <mat-card-title>HTTP GET / Loading</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <ul *ngIf="postsLoading">
        <li *ngFor="let p of postsLoading">
          {{ p.id }}
        </li>
      </ul>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="primary" (click)="getPostsLoading()">
        Success Request
      </button>
    </mat-card-actions>
    <mat-card-footer>
      <mat-progress-bar *ngIf="isLoading" mode="query"></mat-progress-bar>
    </mat-card-footer>
  </mat-card>

  <mat-card fxFlex="20" class="mat-elevation-z8">
    <mat-card-header>
      <mat-card-title>Getting text from the server</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-list-item *ngFor="let p of postsNames">
        <h4 *ngIf="p.texto == null">{{ p.id }}</h4>
        <h4 *ngIf="p.texto != null">{{ p.texto }}</h4>
        <button *ngIf="p.texto == null" (click)="loadname(p.id)">
          refresh
        </button>
      </mat-list-item>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="primary" (click)="getPostsNames()">
        Get names
      </button> </mat-card-actions
    ><mat-card-footer> </mat-card-footer>
  </mat-card>

  <mat-card fxFlex="20" class="mat-elevation-z8">
    <mat-card-header>
      <mat-card-title>HTTP Post Request</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div fxLayout="column" fxLayoutAlign="space-around stretch">
        <mat-form-field>
          <input
            matInput
            placeholder="Post title"
            value=""
            type="text"
            #title
          />
        </mat-form-field>
        <mat-form-field>
          <textarea matInput placeholder="Body" value="" type="text" #body></textarea>
        </mat-form-field>
      </div>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="primary" (click)="savePost(title.value, body.value, 1)">Save</button>
    </mat-card-actions>
    <mat-card-footer>
      <mat-chip-list>
        <mat-chip
          *ngFor="let p of newlyPosts"
          style="margin-left: 10px; margin-bottom: 10px;"
        >
          {{ p.title }}
        </mat-chip>
      </mat-chip-list>
    </mat-card-footer>
  </mat-card>

  <mat-card fxFlex="30" class="mat-elevation-z8">
    <mat-card-header>
      <mat-card-title>HTTP Delete Request</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-list>
        <mat-list-item *ngFor="let post of postsToDelete">
          <p mat-line>{{ post.id }}</p>
          <h4 mat-line>{{ post.title }}</h4>
          <p mat-line>{{ post.body }}</p>
          <button color="accent" (click)="deletePost(post)">Delete</button>
        </mat-list-item>
      </mat-list>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="primary" (click)="loadPostToDelete()">
        Send Request
      </button>
    </mat-card-actions>
    <mat-card-footer> </mat-card-footer>
  </mat-card>

  <mat-card fxFlex="30" class="mat-elevation-z8">
    <mat-card-header>
      <mat-card-title>HTTP Patch Request</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-list>
        <mat-list-item *ngFor="let post of postsToEdit">
          <p mat-line>{{ post.id }}</p>
          <h4 mat-line>{{ post.title }}</h4>
          <p mat-line>{{ post.body }}</p>
          <button color="accent" (click)="editPostAula(post)">Edit</button>
        </mat-list-item>
      </mat-list>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="primary" (click)="loadPostToEdit()">
        Load Posts
      </button>
    </mat-card-actions>
    <mat-card-footer> </mat-card-footer>
  </mat-card>
</div>
